var InitApp=function(){var t={types:{object:null,options:{responsive:!0,processing:!0,serverSide:!0,filter:!1,lengthChange:!1,paging:!0,pageLength:10,ordering:!0,orderMulti:!1,columnDefs:[{type:"date-dd-MMM-yyyy",targets:[2]}],order:[[4,"desc"]],language:{lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:"/admin/sliders/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.Headline=$("#tbHeadline").val(),t.Status=$("#selectStatus option:selected").val()}},columns:[{title:"TITULAR",data:"headline"},{title:"IMAGEN",data:null,render:function(t){return'<img class="img-responsive" style="max-width:100%;" src="/imagenes/'+t.urlImage+'" />'}},{title:"FECHA DE PUBLICACIÓN",data:"publicationDate"},{title:"ESTADO",data:null,render:function(t){return"Oculto"==t.status?'<label class="switch"><input type="checkbox" id="togBtn" class="status-switch" data-id="'+t.id+'"><div class="slider round"><span class="on" style="color:black; font-weight:bold;" >ACTIVO</span><span class="off" style="color:black; font-weight:bold;">OCULTO</span></div></label>':"Activo"==t.status?'<label class="switch"><input type="checkbox" checked id="togBtn" class="status-switch" data-id="'+t.id+'"><div class="slider round"><span class="on" style="color:black; font-weight:bold;">ACTIVO</span><span class="off" style="color:black; font-weight:bold;">OCULTO</span></div></label>':void 0}},{title:"ORDEN",data:null,render:function(t){return'<select data-sequenceOrderId="'+t.sequenceOrderId+'" data-id="'+t.id+'" class="form-control select2-sequence"> <option value="'+t.sequenceOrderId+'">'+t.sequenceOrder+"</option></select>"}},{title:"OPCIONES",data:null,render:function(t){return'<button data-id="'+t.id+'" class="btn btn-light m-btn m-btn--icon m-btn--icon-only edit" title="Editar"><i class="la la-edit"></i></button> <button data-id="'+t.id+'" class="btn btn-light m-btn m-btn--icon m-btn--icon-only delete" title="Delete"><i class="la la-trash"></i></button>'}}],drawCallback:function(e){$.ajax({url:"/admin/sliders/seccionOrden".proto().parseURL()}).done((function(t){$(".select2-sequence").select2({minimumInputLength:0,data:t.items})})),$(".select2-sequence").on("change",(function(){var e=$(this)[0].value,a=$(this).data("id");mApp.blockPage(),$.ajax({url:`/admin/sliders/${a}/cambiar-orden/${e}/post`.proto().parseURL(),type:"POST"}).always((function(){mApp.unblockPage()})).done((function(){t.types.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(t){toastr.error(t.responseText,_app.constants.toastr.title.error),null!=t.responseText?$("#alert-text").html(t.responseText):$("#alert-text").html(_app.constants.toastr.message.error.task),$("#m-form_alert").removeClass("m--hide").show()}))}))}},init:function(){t.types.object=$("#data-table").DataTable(t.types.options),$("#data-table").on("click",".edit",(function(t){var e=$(this).data("id");window.location.href=`/admin/sliders/editar/${e}`.proto().parseURL()})),$("#data-table").on("change",".status-switch",(function(e){var a=$(this).data("id"),s=$(this).is(":checked");mApp.blockPage(),$.ajax({url:`/admin/sliders/${a}/cambiar-estado/post`.proto().parseURL(),type:"POST",data:{status:s}}).always((function(){mApp.unblockPage(),t.types.reload()})).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(t){toastr.error(t.responseText,_app.constants.toastr.title.error),null!=t.responseText?$("#alert-text").html(t.responseText):$("#alert-text").html(_app.constants.toastr.message.error.task),$("#m-form_alert").removeClass("m--hide").show()}))})),$("#data-table").on("click",".delete",(function(e){var a=$(this).data("id");swal({title:"¿Desea eliminar el Banner?",text:"Una vez eliminado no podrá recuperarlo",type:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(e){e.value&&(mApp.blockPage(),$.ajax({url:"/admin/sliders/eliminar".proto().parseURL(),type:"POST",data:{id:a}}).done((function(){mApp.unblockPage(),t.types.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})))}))}))},reload:function(){t.types.object.ajax.reload()}},init:function(){t.types.init()}},e=function(){$("#selectStatus").on("change",(function(){t.types.object.ajax.reload()})).select2({}).trigger("change")},a=function(){$("#tbHeadline").doneTyping((function(){t.types.object.ajax.reload()}))};return{init:function(){t.types.init(),e(),a()}}}();$((function(){InitApp.init(),$("#btnCreateSlide").click((function(){window.location.href="/admin/sliders/registrar"}))}));